(()=>{var e={};e.id=248,e.ids=[248],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7310:e=>{"use strict";e.exports=require("url")},6039:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>p,tree:()=>d});var s=a(7096),r=a(6132),i=a(7284),l=a.n(i),n=a(2564),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);a.d(t,c);let d=["",{children:["admin",{children:["availability",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,9572)),"/workspaces/layerslayers/src/app/admin/availability/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,4076)),"/workspaces/layerslayers/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"]}],o=["/workspaces/layerslayers/src/app/admin/availability/page.tsx"],x="/admin/availability/page",m={require:a,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/availability/page",pathname:"/admin/availability",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7055:(e,t,a)=>{Promise.resolve().then(a.bind(a,2271))},2271:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>AdminAvailability});var s=a(784),r=a(9885),i=a(3582),l=a(2385),n=a(9494),c=a(6303),d=a(6206),o=a(2995),x=a(6047),m=a(3709),p=a(6466),y=a(972);function AdminAvailability(){let[e,t]=(0,r.useState)([]),[a,u]=(0,r.useState)((0,x.Z)(new Date,"yyyy-MM-dd")),[h,b]=(0,r.useState)(!1),[g,f]=(0,r.useState)(null);(0,r.useEffect)(()=>{fetchAvailability()},[]);let fetchAvailability=async()=>{try{let e=await fetch("/api/availability"),a=await e.json();t(a)}catch(e){console.error("Error fetching availability:",e)}},getWeekDays=()=>{let e=(0,p.Z)(new Date,{weekStartsOn:1});return Array.from({length:7},(t,a)=>(0,m.Z)(e,a))},getAvailabilityForDate=t=>{let a=e.find(e=>e.date===t);return a?a.timeSlots:[]},addTimeSlot=async(a,s)=>{let r={id:`${a}-${s}`,time:s,available:!0,maxCapacity:8,currentBookings:0},i=e.map(e=>e.date===a?{...e,timeSlots:[...e.timeSlots,r].sort((e,t)=>e.time.localeCompare(t.time))}:e);e.find(e=>e.date===a)||i.push({date:a,timeSlots:[r]}),t(i)},removeTimeSlot=async(a,s)=>{let r=e.map(e=>e.date===a?{...e,timeSlots:e.timeSlots.filter(e=>e.id!==s)}:e);t(r)},updateTimeSlot=async(a,s,r)=>{let i=e.map(e=>e.date===a?{...e,timeSlots:e.timeSlots.map(e=>e.id===s?{...e,...r}:e)}:e);t(i)};return s.jsx(i.Z,{title:"Verf\xfcgbarkeit verwalten",children:(0,s.jsxs)("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Verf\xfcgbarkeit bearbeiten"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Verwalte die verf\xfcgbaren Termine f\xfcr dein Atelier"})]}),(0,s.jsxs)("button",{onClick:()=>{let e=getWeekDays(),t=["10:00","14:00","18:00"];e.forEach(e=>{let a=(0,x.Z)(e,"yyyy-MM-dd"),s=getAvailabilityForDate(a);t.forEach(e=>{let t=s.find(t=>t.time===e);t||addTimeSlot(a,e)})})},className:"ceramic-button flex items-center space-x-2",children:[s.jsx(l.Z,{className:"h-4 w-4"}),s.jsx("span",{children:"Woche generieren"})]})]})}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Wochenansicht"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,x.Z)(getWeekDays()[0],"dd. MMMM",{locale:y.Z})," - ",(0,x.Z)(getWeekDays()[6],"dd. MMMM yyyy",{locale:y.Z})]})]}),s.jsx("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Zeit"}),getWeekDays().map(e=>s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,s.jsxs)("div",{children:[s.jsx("div",{children:(0,x.Z)(e,"EEE",{locale:y.Z})}),s.jsx("div",{className:"font-normal",children:(0,x.Z)(e,"dd.MM")})]})},e.toISOString()))]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:["09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00"].map(e=>(0,s.jsxs)("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e}),getWeekDays().map(t=>{let a=(0,x.Z)(t,"yyyy-MM-dd"),r=getAvailabilityForDate(a),i=r.find(t=>t.time===e);return s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i?(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${i.available?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:i.available?"Verf\xfcgbar":"Belegt"}),(0,s.jsxs)("div",{className:"text-xs text-gray-600",children:[i.currentBookings,"/",i.maxCapacity]}),s.jsx("button",{onClick:()=>f({date:a,slot:i}),className:"text-ceramic-terracotta hover:text-ceramic-brown",children:s.jsx(n.Z,{className:"h-3 w-3"})}),s.jsx("button",{onClick:()=>removeTimeSlot(a,i.id),className:"text-red-600 hover:text-red-900",children:s.jsx(c.Z,{className:"h-3 w-3"})})]}):s.jsx("button",{onClick:()=>addTimeSlot(a,e),className:"text-ceramic-terracotta hover:text-ceramic-brown",children:s.jsx(l.Z,{className:"h-4 w-4"})})},`${a}-${e}`)})]},e))})]})})]}),g&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:(0,s.jsxs)("div",{className:"p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Zeitslot bearbeiten"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Datum"}),s.jsx("input",{type:"text",value:(0,x.Z)(new Date(g.date),"dd. MMMM yyyy",{locale:y.Z}),disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Zeit"}),s.jsx("input",{type:"text",value:g.slot.time,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max. Kapazit\xe4t"}),s.jsx("input",{type:"number",value:g.slot.maxCapacity,onChange:e=>f({...g,slot:{...g.slot,maxCapacity:parseInt(e.target.value)}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-ceramic-terracotta"})]}),s.jsx("div",{children:(0,s.jsxs)("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:g.slot.available,onChange:e=>f({...g,slot:{...g.slot,available:e.target.checked}}),className:"rounded border-gray-300 text-ceramic-terracotta focus:ring-ceramic-terracotta"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Verf\xfcgbar"})]})})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,s.jsxs)("button",{onClick:()=>f(null),className:"ceramic-button-outline flex items-center space-x-1",children:[s.jsx(d.Z,{className:"h-4 w-4"}),s.jsx("span",{children:"Abbrechen"})]}),(0,s.jsxs)("button",{onClick:()=>{updateTimeSlot(g.date,g.slot.id,{maxCapacity:g.slot.maxCapacity,available:g.slot.available}),f(null)},className:"ceramic-button flex items-center space-x-1",children:[s.jsx(o.Z,{className:"h-4 w-4"}),s.jsx("span",{children:"Speichern"})]})]})]})})})]})})}},9572:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>l,__esModule:()=>i,default:()=>c});var s=a(5153);let r=(0,s.createProxy)(String.raw`/workspaces/layerslayers/src/app/admin/availability/page.tsx`),{__esModule:i,$$typeof:l}=r,n=r.default,c=n}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[13,723,82,169,803,582],()=>__webpack_exec__(6039));module.exports=a})();