(()=>{var e={};e.id=424,e.ids=[424],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7310:e=>{"use strict";e.exports=require("url")},2522:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>d,routeModule:()=>p,tree:()=>o});var r=s(7096),a=s(6132),n=s(7284),i=s.n(n),l=s(2564),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let o=["",{children:["admin",{children:["bookings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8598)),"/workspaces/layerslayers/src/app/admin/bookings/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,4076)),"/workspaces/layerslayers/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],d=["/workspaces/layerslayers/src/app/admin/bookings/page.tsx"],x="/admin/bookings/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/bookings/page",pathname:"/admin/bookings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},7827:(e,t,s)=>{Promise.resolve().then(s.bind(s,1422))},1422:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>AdminBookings});var r=s(784),a=s(9885),n=s(3582),i=s(9518),l=s(2029),c=s(517),o=s(9490),d=s(4571),x=s(5441),m=s(1672),p=s(1264),u=s(6206),g=s(9137);function AdminBookings(){let[e,t]=(0,a.useState)([]),[s,h]=(0,a.useState)([]),[f,y]=(0,a.useState)(""),[j,w]=(0,a.useState)("all"),[v,N]=(0,a.useState)(!0);(0,a.useEffect)(()=>{fetchBookings()},[]),(0,a.useEffect)(()=>{filterBookings()},[e,f,j]);let fetchBookings=async()=>{try{let e=await fetch("/api/bookings"),s=await e.json();t(s),N(!1)}catch(e){console.error("Error fetching bookings:",e),N(!1)}},filterBookings=()=>{let t=e;f&&(t=t.filter(e=>e.name.toLowerCase().includes(f.toLowerCase())||e.email.toLowerCase().includes(f.toLowerCase())||e.phone.includes(f))),"all"!==j&&(t=t.filter(e=>e.status===j)),t.sort((e,t)=>{let s=new Date(`${e.date}T${e.time}`),r=new Date(`${t.date}T${t.time}`);return r.getTime()-s.getTime()}),h(t)},updateBookingStatus=async(s,r)=>{try{let a=e.map(e=>e.id===s?{...e,status:r}:e);t(a)}catch(e){console.error("Error updating booking status:",e)}},getStatusColor=e=>{switch(e){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},getStatusText=e=>{switch(e){case"confirmed":return"Best\xe4tigt";case"pending":return"Ausstehend";case"cancelled":return"Storniert";default:return e}},getServiceName=e=>({"open-studio":"Offenes Atelier","group-event":"Gruppen-Event","date-night":"Date-Night",workshop:"Workshop"})[e]||e;return v?r.jsx(n.Z,{title:"Terminverwaltung",children:r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-ceramic-terracotta"})})}):r.jsx(n.Z,{title:"Terminverwaltung",children:(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx(i.Z,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Suche nach Name, E-Mail oder Telefon...",value:f,onChange:e=>y(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-ceramic-terracotta focus:border-transparent"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(l.Z,{className:"h-4 w-4 text-gray-400"}),(0,r.jsxs)("select",{value:j,onChange:e=>w(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-ceramic-terracotta focus:border-transparent",children:[r.jsx("option",{value:"all",children:"Alle Status"}),r.jsx("option",{value:"pending",children:"Ausstehend"}),r.jsx("option",{value:"confirmed",children:"Best\xe4tigt"}),r.jsx("option",{value:"cancelled",children:"Storniert"})]})]})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[s.length," von ",e.length," Terminen"]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:0===s.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx(c.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"Keine Termine gefunden"})]}):r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kunde"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Datum & Zeit"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teilnehmer"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aktionen"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:e.name}),(0,r.jsxs)("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(o.Z,{className:"h-3 w-3 mr-1"}),e.email]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(d.Z,{className:"h-3 w-3 mr-1"}),e.phone]})]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-900",children:getServiceName(e.service)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-900",children:[r.jsx(c.Z,{className:"h-3 w-3 mr-1"}),new Date(e.date).toLocaleDateString("de-DE")]}),(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(x.Z,{className:"h-3 w-3 mr-1"}),e.time]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-900",children:[r.jsx(m.Z,{className:"h-3 w-3 mr-1"}),e.participants]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getStatusColor(e.status)}`,children:getStatusText(e.status)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:["pending"===e.status&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("button",{onClick:()=>updateBookingStatus(e.id,"confirmed"),className:"text-green-600 hover:text-green-900",title:"Best\xe4tigen",children:r.jsx(p.Z,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>updateBookingStatus(e.id,"cancelled"),className:"text-red-600 hover:text-red-900",title:"Stornieren",children:r.jsx(u.Z,{className:"h-4 w-4"})})]}),r.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:r.jsx(g.Z,{className:"h-4 w-4"})})]})})]},e.id))})]})})})]})})}},8598:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>c});var r=s(5153);let a=(0,r.createProxy)(String.raw`/workspaces/layerslayers/src/app/admin/bookings/page.tsx`),{__esModule:n,$$typeof:i}=a,l=a.default,c=l}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[13,723,409,169,803,582],()=>__webpack_exec__(2522));module.exports=s})();