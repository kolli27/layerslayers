(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[248],{8004:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var s=a(2898);let l=(0,s.Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},9617:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var s=a(2898);let l=(0,s.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},6245:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var s=a(2898);let l=(0,s.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},9409:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var s=a(2898);let l=(0,s.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},5420:function(e,t,a){Promise.resolve().then(a.bind(a,8945))},8945:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return AdminAvailability}});var s=a(7437),l=a(2265),i=a(1568),n=a(2898);let r=(0,n.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var c=a(9617);let d=(0,n.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var o=a(2549),m=a(6245),x=a(2678),h=a(1257),u=a(7458),y=a(7274),f=a(2895),p=a(1369);function startOfWeek(e,t){(0,f.Z)(1,arguments);var a,s,l,i,n,r,c,d,o=(0,p.j)(),m=(0,y.Z)(null!==(a=null!==(s=null!==(l=null!==(i=null==t?void 0:t.weekStartsOn)&&void 0!==i?i:null==t?void 0:null===(n=t.locale)||void 0===n?void 0:null===(r=n.options)||void 0===r?void 0:r.weekStartsOn)&&void 0!==l?l:o.weekStartsOn)&&void 0!==s?s:null===(c=o.locale)||void 0===c?void 0:null===(d=c.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==a?a:0);if(!(m>=0&&m<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");var x=(0,u.Z)(e),h=x.getDay();return x.setDate(x.getDate()-((h<m?7:0)+h-m)),x.setHours(0,0,0,0),x}var b=a(6666);function AdminAvailability(){let[e,t]=(0,l.useState)([]),[a,n]=(0,l.useState)((0,x.Z)(new Date,"yyyy-MM-dd")),[u,y]=(0,l.useState)(!1),[f,p]=(0,l.useState)(null);(0,l.useEffect)(()=>{fetchAvailability()},[]);let fetchAvailability=async()=>{try{let e=await fetch("/api/availability"),a=await e.json();t(a)}catch(e){console.error("Error fetching availability:",e)}},getWeekDays=()=>{let e=startOfWeek(new Date,{weekStartsOn:1});return Array.from({length:7},(t,a)=>(0,h.Z)(e,a))},getAvailabilityForDate=t=>{let a=e.find(e=>e.date===t);return a?a.timeSlots:[]},addTimeSlot=async(a,s)=>{let l={id:"".concat(a,"-").concat(s),time:s,available:!0,maxCapacity:8,currentBookings:0},i=e.map(e=>e.date===a?{...e,timeSlots:[...e.timeSlots,l].sort((e,t)=>e.time.localeCompare(t.time))}:e);e.find(e=>e.date===a)||i.push({date:a,timeSlots:[l]}),t(i)},removeTimeSlot=async(a,s)=>{let l=e.map(e=>e.date===a?{...e,timeSlots:e.timeSlots.filter(e=>e.id!==s)}:e);t(l)},updateTimeSlot=async(a,s,l)=>{let i=e.map(e=>e.date===a?{...e,timeSlots:e.timeSlots.map(e=>e.id===s?{...e,...l}:e)}:e);t(i)};return(0,s.jsx)(i.Z,{title:"Verf\xfcgbarkeit verwalten",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Verf\xfcgbarkeit bearbeiten"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Verwalte die verf\xfcgbaren Termine f\xfcr dein Atelier"})]}),(0,s.jsxs)("button",{onClick:()=>{let e=getWeekDays(),t=["10:00","14:00","18:00"];e.forEach(e=>{let a=(0,x.Z)(e,"yyyy-MM-dd"),s=getAvailabilityForDate(a);t.forEach(e=>{let t=s.find(t=>t.time===e);t||addTimeSlot(a,e)})})},className:"ceramic-button flex items-center space-x-2",children:[(0,s.jsx)(r,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Woche generieren"})]})]})}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Wochenansicht"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,x.Z)(getWeekDays()[0],"dd. MMMM",{locale:b.Z})," - ",(0,x.Z)(getWeekDays()[6],"dd. MMMM yyyy",{locale:b.Z})]})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Zeit"}),getWeekDays().map(e=>(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:(0,x.Z)(e,"EEE",{locale:b.Z})}),(0,s.jsx)("div",{className:"font-normal",children:(0,x.Z)(e,"dd.MM")})]})},e.toISOString()))]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:["09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00"].map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e}),getWeekDays().map(t=>{let a=(0,x.Z)(t,"yyyy-MM-dd"),l=getAvailabilityForDate(a),i=l.find(t=>t.time===e);return(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:i?(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"px-2 py-1 rounded text-xs font-medium ".concat(i.available?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:i.available?"Verf\xfcgbar":"Belegt"}),(0,s.jsxs)("div",{className:"text-xs text-gray-600",children:[i.currentBookings,"/",i.maxCapacity]}),(0,s.jsx)("button",{onClick:()=>p({date:a,slot:i}),className:"text-ceramic-terracotta hover:text-ceramic-brown",children:(0,s.jsx)(c.Z,{className:"h-3 w-3"})}),(0,s.jsx)("button",{onClick:()=>removeTimeSlot(a,i.id),className:"text-red-600 hover:text-red-900",children:(0,s.jsx)(d,{className:"h-3 w-3"})})]}):(0,s.jsx)("button",{onClick:()=>addTimeSlot(a,e),className:"text-ceramic-terracotta hover:text-ceramic-brown",children:(0,s.jsx)(r,{className:"h-4 w-4"})})},"".concat(a,"-").concat(e))})]},e))})]})})]}),f&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Zeitslot bearbeiten"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Datum"}),(0,s.jsx)("input",{type:"text",value:(0,x.Z)(new Date(f.date),"dd. MMMM yyyy",{locale:b.Z}),disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Zeit"}),(0,s.jsx)("input",{type:"text",value:f.slot.time,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max. Kapazit\xe4t"}),(0,s.jsx)("input",{type:"number",value:f.slot.maxCapacity,onChange:e=>p({...f,slot:{...f.slot,maxCapacity:parseInt(e.target.value)}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-ceramic-terracotta"})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:f.slot.available,onChange:e=>p({...f,slot:{...f.slot,available:e.target.checked}}),className:"rounded border-gray-300 text-ceramic-terracotta focus:ring-ceramic-terracotta"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Verf\xfcgbar"})]})})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,s.jsxs)("button",{onClick:()=>p(null),className:"ceramic-button-outline flex items-center space-x-1",children:[(0,s.jsx)(o.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Abbrechen"})]}),(0,s.jsxs)("button",{onClick:()=>{updateTimeSlot(f.date,f.slot.id,{maxCapacity:f.slot.maxCapacity,available:f.slot.available}),p(null)},className:"ceramic-button flex items-center space-x-1",children:[(0,s.jsx)(m.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Speichern"})]})]})]})})})]})})}},1568:function(e,t,a){"use strict";a.d(t,{Z:function(){return admin_AdminLayout}});var s=a(7437),l=a(2265),i=a(4033),n=a(471),r=a(2898);let c=(0,r.Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);var d=a(8203),o=a(5750);let m=(0,r.Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);var x=a(9409),h=a(2549),u=a(8004);let y=(0,r.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var admin_AdminLayout=e=>{let{children:t,title:a}=e,[r,f]=(0,l.useState)(!1),[p,b]=(0,l.useState)(!0),g=(0,i.useRouter)();(0,l.useEffect)(()=>{(0,n.$8)()?b(!1):g.push("/admin/login")},[g]);let v=[{name:"Dashboard",href:"/admin",icon:c},{name:"Termine",href:"/admin/bookings",icon:d.Z},{name:"Verf\xfcgbarkeit",href:"/admin/availability",icon:o.Z},{name:"Inhalte",href:"/admin/content",icon:m},{name:"Einstellungen",href:"/admin/settings",icon:x.Z}];return p?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-ceramic-terracotta"})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,s.jsx)("div",{className:"lg:hidden fixed top-4 left-4 z-50",children:(0,s.jsx)("button",{onClick:()=>f(!r),className:"bg-white p-2 rounded-md shadow-md",children:r?(0,s.jsx)(h.Z,{size:24}):(0,s.jsx)(u.Z,{size:24})})}),(0,s.jsxs)("div",{className:"fixed inset-y-0 left-0 z-40 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out ".concat(r?"translate-x-0":"-translate-x-full"," lg:translate-x-0"),children:[(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-ceramic-brown",children:"LAYERS"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Admin Dashboard"})]}),(0,s.jsx)("nav",{className:"mt-8",children:v.map(e=>(0,s.jsxs)("a",{href:e.href,className:"flex items-center px-6 py-3 text-gray-700 hover:bg-ceramic-cream/50 hover:text-ceramic-terracotta transition-colors",children:[(0,s.jsx)(e.icon,{className:"h-5 w-5 mr-3"}),e.name]},e.name))}),(0,s.jsx)("div",{className:"absolute bottom-0 w-full p-6",children:(0,s.jsxs)("button",{onClick:()=>{(0,n.kS)(),g.push("/admin/login")},className:"flex items-center w-full text-gray-700 hover:text-red-600 transition-colors",children:[(0,s.jsx)(y,{className:"h-5 w-5 mr-3"}),"Abmelden"]})})]}),(0,s.jsxs)("div",{className:"lg:ml-64",children:[(0,s.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,s.jsx)("div",{className:"px-4 sm:px-6 lg:px-8 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 ml-12 lg:ml-0",children:a}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:new Date().toLocaleDateString("de-DE",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,s.jsx)("button",{onClick:()=>window.open("/","_blank"),className:"ceramic-button-outline text-sm",children:"Website ansehen"})]})]})})}),(0,s.jsx)("main",{className:"p-4 sm:p-6 lg:p-8",children:t})]}),r&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>f(!1)})]})}},471:function(e,t,a){"use strict";a.d(t,{$8:function(){return isAuthenticated},kS:function(){return logout},x4:function(){return login}});let s={username:"admin",password:"layers2024"},verifyAdminCredentials=(e,t)=>e===s.username&&t===s.password,isAuthenticated=()=>"true"===localStorage.getItem("admin_authenticated"),login=(e,t)=>!!verifyAdminCredentials(e,t)&&(localStorage.setItem("admin_authenticated","true"),!0),logout=()=>{localStorage.removeItem("admin_authenticated")}},4033:function(e,t,a){e.exports=a(94)}},function(e){e.O(0,[646,971,472,744],function(){return e(e.s=5420)}),_N_E=e.O()}]);