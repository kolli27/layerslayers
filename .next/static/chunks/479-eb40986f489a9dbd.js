"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[479],{2442:function(e,t,a){a.d(t,{Z:function(){return n}});var r=a(2898);let n=(0,r.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},7158:function(e,t,a){a.d(t,{Z:function(){return n}});var r=a(2898);let n=(0,r.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},6141:function(e,t,a){a.d(t,{Z:function(){return n}});var r=a(2898);let n=(0,r.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1295:function(e,t,a){a.d(t,{Z:function(){return n}});var r=a(2898);let n=(0,r.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},2741:function(e,t,a){a.d(t,{Z:function(){return n}});var r=a(2898);let n=(0,r.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},7972:function(e,t,a){a.d(t,{Z:function(){return n}});var r=a(2898);let n=(0,r.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},541:function(e,t,a){a.d(t,{Z:function(){return components_BookingCalendar}});var r=a(7437),n=a(2265),s=a(2678),i=a(1257),l=a(7458),o=a(2895);function startOfMonth(e){(0,o.Z)(1,arguments);var t=(0,l.Z)(e);return t.setDate(1),t.setHours(0,0,0,0),t}function endOfMonth(e){(0,o.Z)(1,arguments);var t=(0,l.Z)(e),a=t.getMonth();return t.setFullYear(t.getFullYear(),a+1,0),t.setHours(23,59,59,999),t}function eachDayOfInterval(e,t){(0,o.Z)(1,arguments);var a,r=e||{},n=(0,l.Z)(r.start),s=(0,l.Z)(r.end).getTime();if(!(n.getTime()<=s))throw RangeError("Invalid interval");var i=[];n.setHours(0,0,0,0);var c=Number(null!==(a=null==t?void 0:t.step)&&void 0!==a?a:1);if(c<1||isNaN(c))throw RangeError("`options.step` must be a number greater than 1");for(;n.getTime()<=s;)i.push((0,l.Z)(n)),n.setDate(n.getDate()+c),n.setHours(0,0,0,0);return i}function startOfDay(e){(0,o.Z)(1,arguments);var t=(0,l.Z)(e);return t.setHours(0,0,0,0),t}function isSameDay(e,t){(0,o.Z)(2,arguments);var a=startOfDay(e),r=startOfDay(t);return a.getTime()===r.getTime()}function isBefore(e,t){(0,o.Z)(2,arguments);var a=(0,l.Z)(e),r=(0,l.Z)(t);return a.getTime()<r.getTime()}var c=a(6666),d=a(6141),m=a(2898);let u=(0,m.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var h=a(7158),components_BookingCalendar=e=>{let{selectedDate:t,selectedService:a,onDateSelect:l,onTimeSelect:o}=e,[m,g]=(0,n.useState)(new Date),[x,y]=(0,n.useState)([]),[p,f]=(0,n.useState)([]),fetchAvailability=async()=>{try{let e=(0,s.Z)(m,"yyyy-MM-dd"),t=(0,s.Z)((0,i.Z)(m,60),"yyyy-MM-dd"),r=await fetch("/api/availability?service=".concat(a,"&startDate=").concat(e,"&endDate=").concat(t));if(r.ok){let e=await r.json();y(e)}}catch(t){console.error("Error fetching availability:",t);let e=[{date:(0,s.Z)((0,i.Z)(new Date,3),"yyyy-MM-dd"),timeSlots:[{id:"1",time:"10:00",available:!0,maxCapacity:8,currentBookings:2},{id:"2",time:"14:00",available:!0,maxCapacity:8,currentBookings:5},{id:"3",time:"18:00",available:!0,maxCapacity:6,currentBookings:1}]},{date:(0,s.Z)((0,i.Z)(new Date,5),"yyyy-MM-dd"),timeSlots:[{id:"4",time:"10:00",available:!0,maxCapacity:8,currentBookings:0},{id:"5",time:"14:00",available:!1,maxCapacity:8,currentBookings:8},{id:"6",time:"18:00",available:!0,maxCapacity:6,currentBookings:3}]}];y(e)}};(0,n.useEffect)(()=>{fetchAvailability()},[a,m]),(0,n.useEffect)(()=>{if(t){var e;let a=(null===(e=x.find(e=>e.date===t))||void 0===e?void 0:e.timeSlots)||[];f(a)}else f([])},[t,x]);let b=startOfMonth(m),v=endOfMonth(m),j=eachDayOfInterval({start:b,end:v}),isDateAvailable=e=>{let t=(0,s.Z)(e,"yyyy-MM-dd");return x.some(e=>e.date===t&&e.timeSlots.some(e=>e.available))},isDateToday=e=>isSameDay(e,new Date),isDatePast=e=>isBefore(e,new Date)&&!isDateToday(e),getAvailableSlotsCount=e=>{let t=(0,s.Z)(e,"yyyy-MM-dd"),a=x.find(e=>e.date===t);return a?a.timeSlots.filter(e=>e.available).length:0},handleDateClick=e=>{if(isDatePast(e)||!isDateAvailable(e))return;let t=(0,s.Z)(e,"yyyy-MM-dd");l(t)},handleTimeClick=e=>{o(e)},Z=(()=>{let e=x.filter(e=>e.timeSlots.some(e=>e.available)).sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime());return e[0]?new Date(e[0].date):null})();return(0,r.jsxs)("div",{className:"space-y-6",children:[Z&&(0,r.jsx)("div",{className:"bg-ceramic-terracotta/10 rounded-lg p-4",children:(0,r.jsxs)("p",{className:"text-sm text-ceramic-brown font-medium",children:[(0,r.jsx)(d.Z,{className:"inline h-4 w-4 mr-1"}),"N\xe4chster verf\xfcgbarer Termin: ",(0,s.Z)(Z,"dd. MMMM yyyy",{locale:c.Z})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("button",{onClick:()=>{g(e=>new Date(e.getFullYear(),e.getMonth()-1))},className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:(0,r.jsx)(u,{className:"h-5 w-5"})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:(0,s.Z)(m,"MMMM yyyy",{locale:c.Z})}),(0,r.jsx)("button",{onClick:()=>{g(e=>new Date(e.getFullYear(),e.getMonth()+1))},className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:(0,r.jsx)(h.Z,{className:"h-5 w-5"})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-7 gap-1 text-center text-sm",children:[["Mo","Di","Mi","Do","Fr","Sa","So"].map(e=>(0,r.jsx)("div",{className:"p-2 text-gray-500 font-medium",children:e},e)),j.map(e=>{let a=(0,s.Z)(e,"yyyy-MM-dd"),n=isDateAvailable(e),i=isDatePast(e),l=t===a,o=getAvailableSlotsCount(e);return(0,r.jsxs)("button",{onClick:()=>handleDateClick(e),disabled:i||!n,className:"\n                p-2 rounded-lg text-sm font-medium transition-colors relative\n                ".concat(l?"bg-ceramic-terracotta text-white":n?"bg-ceramic-sage/20 text-ceramic-brown hover:bg-ceramic-sage/30":i?"text-gray-300 cursor-not-allowed":"text-gray-400 cursor-not-allowed","\n              "),children:[(0,s.Z)(e,"d"),n&&o>0&&(0,r.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-ceramic-terracotta rounded-full text-white text-xs flex items-center justify-center",children:o})]},a)})]}),t&&p.length>0&&(0,r.jsxs)("div",{className:"border-t pt-6",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Verf\xfcgbare Zeiten f\xfcr ",(0,s.Z)(new Date(t),"dd. MMMM yyyy",{locale:c.Z})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:p.map(e=>(0,r.jsxs)("button",{onClick:()=>handleTimeClick(e.time),disabled:!e.available,className:"\n                  p-3 rounded-lg border-2 transition-colors text-left\n                  ".concat(e.available?"border-ceramic-terracotta/30 hover:border-ceramic-terracotta hover:bg-ceramic-terracotta/5":"border-gray-200 bg-gray-50 cursor-not-allowed","\n                "),children:[(0,r.jsx)("div",{className:"font-semibold text-gray-900",children:e.time}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:e.available?"".concat(e.maxCapacity-e.currentBookings," Pl\xe4tze frei"):"Ausgebucht"})]},e.id))})]})]})}},7119:function(e,t,a){a.d(t,{Z:function(){return components_BookingForm}});var r=a(7437),n=a(2265),s=a(2678),i=a(6666),l=a(2442),o=a(7972),c=a(1295),d=a(2741),m=a(5750),u=a(2898);let h=(0,u.Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);var components_BookingForm=e=>{let{selectedDate:t,selectedTime:a,selectedService:u}=e,[g,x]=(0,n.useState)({name:"",email:"",phone:"",participants:1,specialRequests:""}),[y,p]=(0,n.useState)(!1),[f,b]=(0,n.useState)(!1),handleInputChange=e=>{let{name:t,value:a}=e.target;x(e=>({...e,[t]:a}))},handleSubmit=async e=>{if(e.preventDefault(),t&&a){p(!0);try{let e=await fetch("/api/bookings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:t,time:a,service:u,name:g.name,email:g.email,phone:g.phone,participants:g.participants,specialRequests:g.specialRequests})});if(e.ok)b(!0),setTimeout(()=>{b(!1),x({name:"",email:"",phone:"",participants:1,specialRequests:""})},3e3);else{let t=await e.json();alert("Booking failed: ".concat(t.error))}}catch(e){console.error("Error creating booking:",e),alert("Booking failed. Please try again.")}finally{p(!1)}}},v=g.name&&g.email&&g.phone&&t&&a;return f?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-ceramic-sage/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(l.Z,{className:"h-8 w-8 text-ceramic-sage"})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Buchung erfolgreich!"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Wir haben deine Buchung erhalten und senden dir in K\xfcrze eine Best\xe4tigung per E-Mail."})]}):(0,r.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[(t||a)&&(0,r.jsxs)("div",{className:"bg-ceramic-cream/30 rounded-lg p-4 space-y-2",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900",children:"Deine Auswahl:"}),(0,r.jsxs)("div",{className:"text-sm text-gray-700 space-y-1",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Service:"})," ",{"open-studio":"Offenes Atelier","group-event":"Gruppen-Event","date-night":"Date-Night",workshop:"Workshop"}[u]]}),t&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Datum:"})," ",(0,s.Z)(new Date(t),"dd. MMMM yyyy",{locale:i.Z})]}),a&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Uhrzeit:"})," ",a]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,r.jsx)(o.Z,{className:"inline h-4 w-4 mr-1"}),"Name *"]}),(0,r.jsx)("input",{type:"text",id:"name",name:"name",value:g.name,onChange:handleInputChange,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-ceramic-terracotta focus:border-transparent",placeholder:"Dein vollst\xe4ndiger Name",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,r.jsx)(c.Z,{className:"inline h-4 w-4 mr-1"}),"E-Mail *"]}),(0,r.jsx)("input",{type:"email",id:"email",name:"email",value:g.email,onChange:handleInputChange,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-ceramic-terracotta focus:border-transparent",placeholder:"deine@email.de",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,r.jsx)(d.Z,{className:"inline h-4 w-4 mr-1"}),"Telefon *"]}),(0,r.jsx)("input",{type:"tel",id:"phone",name:"phone",value:g.phone,onChange:handleInputChange,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-ceramic-terracotta focus:border-transparent",placeholder:"0221 12345678",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"participants",className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,r.jsx)(m.Z,{className:"inline h-4 w-4 mr-1"}),"Anzahl Personen"]}),(0,r.jsx)("select",{id:"participants",name:"participants",value:g.participants,onChange:handleInputChange,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-ceramic-terracotta focus:border-transparent text-base",children:[1,2,3,4,5,6,7,8,9,10].map(e=>(0,r.jsxs)("option",{value:e,children:[e," Person",e>1?"en":""]},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"specialRequests",className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,r.jsx)(h,{className:"inline h-4 w-4 mr-1"}),"Besondere W\xfcnsche"]}),(0,r.jsx)("textarea",{id:"specialRequests",name:"specialRequests",value:g.specialRequests,onChange:handleInputChange,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-ceramic-terracotta focus:border-transparent",placeholder:"Allergien, besondere W\xfcnsche, etc."})]})]}),(0,r.jsx)("button",{type:"submit",disabled:!v||y,className:"w-full py-3 px-6 rounded-lg font-semibold transition-colors ".concat(v&&!y?"bg-ceramic-terracotta hover:bg-ceramic-brown text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:y?"Wird gebucht...":"Jetzt buchen"}),(0,r.jsx)("p",{className:"text-xs text-gray-600 text-center",children:"Mit der Buchung stimmst du unseren AGB zu. Du erh\xe4ltst eine Best\xe4tigung per E-Mail."})]})}}}]);